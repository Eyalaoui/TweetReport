<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard Saegus Twitter Analytics</title>
    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
    <style>
        body {
            font-family: 'Arial', sans-serif;
            margin: 0;
            padding: 0;
            background-color: #f5f5f5;
        }
        
        .navbar {
            background-color: #1DA1F2;
            padding: 1rem;
            position: fixed;
            width: 100%;
            top: 0;
            z-index: 1000;
        }
        
        .navbar h1 {
            color: white;
            margin: 0;
        }
        
        .menu {
            background-color: #ffffff;
            width: 250px;
            position: fixed;
            height: 100%;
            padding-top: 80px;
            box-shadow: 2px 0 5px rgba(0,0,0,0.1);
        }
        
        .menu a {
            display: block;
            padding: 1rem;
            color: #1DA1F2;
            text-decoration: none;
            transition: background-color 0.3s;
        }
        
        .menu a:hover {
            background-color: #f0f0f0;
        }
        
        .content {
            margin-left: 250px;
            padding: 80px 2rem 2rem 2rem;
        }
        
        .section {
            background-color: white;
            padding: 2rem;
            margin-bottom: 2rem;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        
        .graph-container {
            width: 100%;
            height: 500px;
            margin-bottom: 2rem;
        }
        
        .stats-container {
            background-color: #f8f9fa;
            padding: 1rem;
            border-radius: 4px;
            margin-top: 1rem;
        }
        
        .highlight {
            background-color: #e3f2fd;
            padding: 0.5rem;
            border-radius: 4px;
            margin: 0.5rem 0;
        }
    </style>
</head>
<body>
    <div class="navbar">
        <h1>Saegus Twitter Analytics</h1>
    </div>
    
    <div class="menu">
        <a href="#vue-generale">Vue Générale</a>
        <a href="#distribution-temporelle">Distribution Temporelle</a>
        <a href="#engagement">Analyse de l'Engagement</a>
        <a href="#topics">Analyse des Topics</a>
        <a href="#rapport">Rapport Détaillé</a>
    </div>
    
    <div class="content">
        <div id="vue-generale" class="section">
            <h2>Vue Générale</h2>
            <div id="dashboard" class="graph-container"></div>
        </div>
        
        <div id="distribution-temporelle" class="section">
            <h2>Distribution Temporelle</h2>
            <div id="tweets-by-day" class="graph-container"></div>
            <div id="tweets-by-hour" class="graph-container"></div>
        </div>
        
        <div id="engagement" class="section">
            <h2>Analyse de l'Engagement</h2>
            <div id="engagement-by-day" class="graph-container"></div>
            <div id="engagement-by-hour" class="graph-container"></div>
        </div>
        
        <div id="topics" class="section">
            <h2>Analyse des Topics</h2>
            <div id="topics-distribution" class="graph-container"></div>
            <div id="topic-engagement" class="graph-container"></div>
        </div>
        
        <div id="rapport" class="section">
            <h2>Rapport Détaillé</h2>
            <div id="stats-report" class="stats-container"></div>
        </div>
    </div>

    <script>
        // Fonction pour charger les graphiques depuis les fichiers HTML
        async function loadGraph(elementId, filePath) {
            try {
                const response = await fetch(filePath);
                const text = await response.text();
                
                // Extraire les données du graphique
                const dataMatch = text.match(/var data = (\[.*?\]);/s);
                const layoutMatch = text.match(/var layout = (.*?);/s);
                
                if (dataMatch && layoutMatch) {
                    const data = JSON.parse(dataMatch[1]);
                    const layout = JSON.parse(layoutMatch[1]);
                    
                    // Mettre à jour le layout pour s'adapter au conteneur
                    layout.height = 500;
                    layout.width = null;
                    layout.autosize = true;
                    
                    Plotly.newPlot(elementId, data, layout);
                } else {
                    console.error(`Format de données invalide dans ${filePath}`);
                }
            } catch (error) {
                console.error(`Erreur lors du chargement de ${filePath}:`, error);
            }
        }

        // Fonction pour charger le rapport
        async function loadReport() {
            try {
                const response = await fetch('graphs/stats_report.txt');
                const text = await response.text();
                document.getElementById('stats-report').innerHTML = text.replace(/\n/g, '<br>');
            } catch (error) {
                console.error('Erreur lors du chargement du rapport:', error);
            }
        }

        // Chargement de tous les graphiques
        window.onload = function() {
            loadGraph('dashboard', 'graphs/dashboard.html');
            loadGraph('tweets-by-day', 'graphs/tweets_by_day.html');
            loadGraph('tweets-by-hour', 'graphs/tweets_by_hour.html');
            loadGraph('engagement-by-day', 'graphs/engagement_by_day.html');
            loadGraph('engagement-by-hour', 'graphs/engagement_by_hour.html');
            loadGraph('topics-distribution', 'graphs/topics_distribution.html');
            loadGraph('topic-engagement', 'graphs/topic_engagement.html');
            loadReport();
        };
    </script>
</body>
</html> 
